<!DOCTYPE html><html><head><title>Quasar App</title><meta charset=utf-8>
  <meta name=description content="A Quasar Project">
  <meta name=format-detection content="telephone=no">
  <meta name=msapplication-tap-highlight content=no>
  <meta name=viewport content="user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1,width=device-width">
  <link rel=icon type=image/png sizes=128x128 href="/cis/icons/favicon-128x128.png">
  <link rel=icon type=image/png sizes=96x96 href="/cis/icons/favicon-96x96.png">
  <link rel=icon type=image/png sizes=32x32 href="/cis/icons/favicon-32x32.png">
  <link rel=icon type=image/png sizes=16x16 href="/cis/icons/favicon-16x16.png">
  <link rel=icon type=image/ico href="/cis/favicon.ico">  
  <script type="module" crossorigin src="/cis/assets/index.1dbbfdb3.js"></script>
  <link rel="stylesheet" href="/cis/assets/index.737710a9.css">
</head>
  <body onload="geoFindMe()">
  <div id=q-app></div>
    <p id = "status"></p>
    <a id = "map-link" target="_blank"></a>
    <script>
      function geoFindMe() {

        const status = document.querySelector('#status');
        const mapLink = document.querySelector('#map-link');
      
        mapLink.href = '';
        mapLink.textContent = '';
      
        function success(position) {
          
          const latitude  = position.coords.latitude;
          const longitude = position.coords.longitude;
      
          google.script.run.saveCoordinates(latitude,longitude);
      
          status.textContent = '';
          mapLink.href = 'https://www.openstreetmap.org/#map=18/' + `${latitude}\/${longitude}`;
          mapLink.textContent = `Latitude: ${latitude} °, Longitude: ${longitude} °`;
        }

        function error() {
          status.textContent = 'Unable to retrieve your location';
        }

        if(!navigator.geolocation) {
          status.textContent = 'Geolocation is not supported by your browser';
        } else {
          status.textContent = 'Locating…';
          navigator.geolocation.getCurrentPosition(success, error);
        }

      }

      
    </script>
  </body>
</html>
